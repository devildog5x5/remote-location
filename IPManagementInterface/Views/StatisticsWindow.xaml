<Window x:Class="IPManagementInterface.Views.StatisticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Device Statistics" 
        Height="700" Width="900"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource BackgroundBrush}"
        Icon="pack://application:,,,/Resources/TestWrrior.ico">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Device Statistics &amp; Analytics" 
                   FontSize="24" 
                   FontWeight="Bold"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   Margin="0,0,0,20"/>

        <ScrollViewer Grid.Row="1">
            <StackPanel>
                <!-- Overall Statistics -->
                <Border Background="{DynamicResource SurfaceBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="20"
                        Margin="0,0,0,15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Total Devices" 
                                       FontSize="12"
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding Statistics.TotalDevices}" 
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource PrimaryBrush}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Online" 
                                       FontSize="12"
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding Statistics.OnlineDevices}" 
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#4CAF50"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Offline" 
                                       FontSize="12"
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding Statistics.OfflineDevices}" 
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#F44336"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3">
                            <TextBlock Text="Unknown" 
                                       FontSize="12"
                                       Foreground="{DynamicResource TextSecondaryBrush}"
                                       Margin="0,0,0,5"/>
                            <TextBlock Text="{Binding Statistics.UnknownDevices}" 
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource TextSecondaryBrush}"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- By Type -->
                <Border Background="{DynamicResource SurfaceBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="20"
                        Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Devices by Type" 
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   Margin="0,0,0,15"/>
                        <ItemsControl ItemsSource="{Binding Statistics.ByType}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0"
                                                   Foreground="{DynamicResource TextPrimaryBrush}">
                                            <TextBlock.Text>
                                                <Binding Path="Key"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock Grid.Column="1"
                                                   FontWeight="SemiBold"
                                                   Foreground="{DynamicResource AccentBrush}">
                                            <TextBlock.Text>
                                                <Binding Path="Value"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- By Group -->
                <Border Background="{DynamicResource SurfaceBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="20"
                        Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Devices by Group" 
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   Margin="0,0,0,15"/>
                        <ItemsControl ItemsSource="{Binding Statistics.ByGroup}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0"
                                                   Foreground="{DynamicResource TextPrimaryBrush}">
                                            <TextBlock.Text>
                                                <Binding Path="Key"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                        <TextBlock Grid.Column="1"
                                                   FontWeight="SemiBold"
                                                   Foreground="{DynamicResource AccentBrush}">
                                            <TextBlock.Text>
                                                <Binding Path="Value"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- Uptime Report -->
                <Border Background="{DynamicResource SurfaceBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="20"
                        Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Uptime Report" 
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   Margin="0,0,0,15"/>
                        <DataGrid ItemsSource="{Binding UptimeReport}"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  MaxHeight="200">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Device" Binding="{Binding DeviceName}" Width="150"/>
                                <DataGridTextColumn Header="IP Address" Binding="{Binding IpAddress}" Width="120"/>
                                <DataGridTextColumn Header="Uptime" Binding="{Binding TotalUptime}" Width="100"/>
                                <DataGridTextColumn Header="Uptime %" Width="80">
                                    <DataGridTextColumn.Binding>
                                        <Binding Path="UptimePercentage" StringFormat="{}{0:F1}%"/>
                                    </DataGridTextColumn.Binding>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="80"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <Button Content="Close" 
                        HorizontalAlignment="Right"
                        Width="100"
                        Height="35"
                        Click="CloseButton_Click"
                        Background="{DynamicResource PrimaryBrush}"
                        Foreground="White"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
